"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},84629:e=>{e.exports=import("@libsql/client")},7595:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>l,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>c,staticGenerationAsyncStorage:()=>m});var a=r(49303),o=r(88716),s=r(60670),d=r(75414),i=e([d]);d=(i.then?(await i)():i)[0];let u=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"C:\\Users\\denis\\famiglia-budget\\src\\app\\api\\auth\\register\\route.ts",nextConfigOutput:"",userland:d}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:c}=u,f="/api/auth/register/route";function l(){return(0,s.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:m})}n()}catch(e){n(e)}})},75414:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{POST:()=>p});var a=r(87070),o=r(90469),s=r(63737),d=r(57745),i=r(98691),l=r(46335),u=e([o]);async function p(e){try{let{name:t,email:r,password:n}=await e.json();if(!t||!r||!n)return a.NextResponse.json({error:"Tutti i campi sono richiesti"},{status:400});let[u]=await o.db.select().from(s.users).where((0,d.eq)(s.users.email,r)).limit(1);if(u)return a.NextResponse.json({error:"Email gi\xe0 registrata"},{status:400});let p=await (0,i.vp)(n,12);return await o.db.insert(s.users).values({id:(0,l.Z)(),name:t,email:r,password:p,provider:"credentials",createdAt:new Date}),a.NextResponse.json({success:!0})}catch(e){return console.error("Error registering:",e),a.NextResponse.json({error:"Errore interno"},{status:500})}}o=(u.then?(await u)():u)[0],n()}catch(e){n(e)}})},90469:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{db:()=>l});var a=r(84629),o=r(3122),s=r(63737),d=e([a,o]);[a,o]=d.then?(await d)():d;let i=(0,a.createClient)({url:process.env.TURSO_DATABASE_URL,authToken:process.env.TURSO_AUTH_TOKEN}),l=(0,o.t)(i,{schema:s});n()}catch(e){n(e)}})},63737:(e,t,r)=>{r.r(t),r.d(t,{expenseCategories:()=>p,expenseCategoriesRelations:()=>x,expensePayments:()=>f,expensePaymentsRelations:()=>w,groupMembers:()=>u,groupMembersRelations:()=>L,groups:()=>i,groupsRelations:()=>g,oneTimeExpenses:()=>c,oneTimeExpensesRelations:()=>N,payments:()=>_,paymentsRelations:()=>I,recurringExpenses:()=>m,recurringExpensesRelations:()=>h,users:()=>l,usersRelations:()=>y});var n=r(87106),a=r(53586),o=r(5795),s=r(54341),d=r(81347);let i=(0,n.Px)("groups",{id:(0,a.fL)("id").primaryKey(),name:(0,a.fL)("name").notNull(),ownerId:(0,a.fL)("owner_id").notNull(),createdAt:(0,o._L)("created_at",{mode:"timestamp"}).$defaultFn(()=>new Date),updatedAt:(0,o._L)("updated_at",{mode:"timestamp"}).$defaultFn(()=>new Date)}),l=(0,n.Px)("users",{id:(0,a.fL)("id").primaryKey(),name:(0,a.fL)("name"),email:(0,a.fL)("email").notNull().unique(),image:(0,a.fL)("image"),password:(0,a.fL)("password"),provider:(0,a.fL)("provider").notNull().default("credentials"),createdAt:(0,o._L)("created_at",{mode:"timestamp"}).$defaultFn(()=>new Date)}),u=(0,n.Px)("group_members",{id:(0,a.fL)("id").primaryKey(),groupId:(0,a.fL)("group_id").notNull().references(()=>i.id,{onDelete:"cascade"}),userId:(0,a.fL)("user_id").references(()=>l.id,{onDelete:"set null"}),name:(0,a.fL)("name").notNull(),quotaPercent:(0,s.kw)("quota_percent").notNull().default(0),createdAt:(0,o._L)("created_at",{mode:"timestamp"}).$defaultFn(()=>new Date)}),p=(0,n.Px)("expense_categories",{id:(0,a.fL)("id").primaryKey(),groupId:(0,a.fL)("group_id").notNull().references(()=>i.id,{onDelete:"cascade"}),name:(0,a.fL)("name").notNull(),icon:(0,a.fL)("icon").notNull().default("Folder"),color:(0,a.fL)("color").notNull().default("#6b7280"),createdAt:(0,o._L)("created_at",{mode:"timestamp"}).$defaultFn(()=>new Date)}),m=(0,n.Px)("recurring_expenses",{id:(0,a.fL)("id").primaryKey(),groupId:(0,a.fL)("group_id").notNull().references(()=>i.id,{onDelete:"cascade"}),categoryId:(0,a.fL)("category_id").references(()=>p.id,{onDelete:"set null"}),name:(0,a.fL)("name").notNull(),amount:(0,s.kw)("amount").notNull(),frequencyType:(0,a.fL)("frequency_type").notNull(),frequencyValue:(0,o._L)("frequency_value").notNull().default(1),dayOfMonth:(0,o._L)("day_of_month"),isActive:(0,o._L)("is_active",{mode:"boolean"}).notNull().default(!0),startMonth:(0,o._L)("start_month"),startYear:(0,o._L)("start_year"),endMonth:(0,o._L)("end_month"),endYear:(0,o._L)("end_year"),createdAt:(0,o._L)("created_at",{mode:"timestamp"}).$defaultFn(()=>new Date),updatedAt:(0,o._L)("updated_at",{mode:"timestamp"}).$defaultFn(()=>new Date)}),c=(0,n.Px)("one_time_expenses",{id:(0,a.fL)("id").primaryKey(),groupId:(0,a.fL)("group_id").notNull().references(()=>i.id,{onDelete:"cascade"}),expenseId:(0,a.fL)("expense_id").references(()=>m.id,{onDelete:"set null"}),categoryId:(0,a.fL)("category_id").references(()=>p.id,{onDelete:"set null"}),name:(0,a.fL)("name").notNull(),amount:(0,s.kw)("amount").notNull(),date:(0,o._L)("date",{mode:"timestamp"}).notNull(),month:(0,o._L)("month").notNull(),year:(0,o._L)("year").notNull(),isPaid:(0,o._L)("is_paid",{mode:"boolean"}).notNull().default(!1),createdAt:(0,o._L)("created_at",{mode:"timestamp"}).$defaultFn(()=>new Date)}),f=(0,n.Px)("expense_payments",{id:(0,a.fL)("id").primaryKey(),groupId:(0,a.fL)("group_id").notNull().references(()=>i.id,{onDelete:"cascade"}),expenseId:(0,a.fL)("expense_id").notNull().references(()=>m.id,{onDelete:"cascade"}),month:(0,o._L)("month").notNull(),year:(0,o._L)("year").notNull(),amount:(0,s.kw)("amount").notNull(),paidAt:(0,o._L)("paid_at",{mode:"timestamp"}).$defaultFn(()=>new Date)}),_=(0,n.Px)("payments",{id:(0,a.fL)("id").primaryKey(),groupId:(0,a.fL)("group_id").notNull().references(()=>i.id,{onDelete:"cascade"}),memberId:(0,a.fL)("member_id").notNull().references(()=>u.id,{onDelete:"cascade"}),expenseId:(0,a.fL)("expense_id").references(()=>m.id,{onDelete:"set null"}),month:(0,o._L)("month").notNull(),year:(0,o._L)("year").notNull(),amountPaid:(0,s.kw)("amount_paid").notNull(),isConfirmed:(0,o._L)("is_confirmed",{mode:"boolean"}).notNull().default(!1),confirmedAt:(0,o._L)("confirmed_at",{mode:"timestamp"}),createdAt:(0,o._L)("created_at",{mode:"timestamp"}).$defaultFn(()=>new Date)}),g=(0,d.lE)(i,({many:e})=>({members:e(u),categories:e(p),expenses:e(m),oneTimeExpenses:e(c),payments:e(_),expensePayments:e(f)})),y=(0,d.lE)(l,({many:e})=>({groupMembers:e(u)})),L=(0,d.lE)(u,({one:e,many:t})=>({group:e(i,{fields:[u.groupId],references:[i.id]}),payments:t(_)})),x=(0,d.lE)(p,({one:e,many:t})=>({group:e(i,{fields:[p.groupId],references:[i.id]}),expenses:t(m),oneTimeExpenses:t(c)})),h=(0,d.lE)(m,({one:e,many:t})=>({group:e(i,{fields:[m.groupId],references:[i.id]}),category:e(p,{fields:[m.categoryId],references:[p.id]}),payments:t(_),expensePayments:t(f)})),N=(0,d.lE)(c,({one:e})=>({group:e(i,{fields:[c.groupId],references:[i.id]}),expense:e(m,{fields:[c.expenseId],references:[m.id]}),category:e(p,{fields:[c.categoryId],references:[p.id]})})),w=(0,d.lE)(f,({one:e})=>({group:e(i,{fields:[f.groupId],references:[i.id]}),expense:e(m,{fields:[f.expenseId],references:[m.id]})})),I=(0,d.lE)(_,({one:e})=>({group:e(i,{fields:[_.groupId],references:[i.id]}),member:e(u,{fields:[_.memberId],references:[u.id]}),expense:e(m,{fields:[_.expenseId],references:[m.id]})}))},46335:(e,t,r)=>{r.d(t,{Z:()=>i});let n=require("node:crypto"),a={randomUUID:n.randomUUID},o=new Uint8Array(256),s=o.length,d=[];for(let e=0;e<256;++e)d.push((e+256).toString(16).slice(1));let i=function(e,t,r){return!a.randomUUID||t||e?function(e,t,r){let a=(e=e||{}).random??e.rng?.()??(s>o.length-16&&((0,n.randomFillSync)(o),s=0),o.slice(s,s+=16));if(a.length<16)throw Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=a[e];return t}return function(e,t=0){return(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase()}(a)}(e,t,r):a.randomUUID()}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,422,70],()=>r(7595));module.exports=n})();