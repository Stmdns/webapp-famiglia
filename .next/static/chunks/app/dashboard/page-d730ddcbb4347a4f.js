(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{89377:function(e,t,s){Promise.resolve().then(s.bind(s,50441))},50441:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var a=s(57437),r=s(80605),n=s(99376),i=s(2265),o=s(59128),l=s(79820),d=s(12381),c=s(40279),u=s(75060),x=s(74291),m=s(14438),p=s(14938),g=s(47692),f=s(99397),h=s(95805),b=s(10407);function v(){var e;let{data:t,status:s}=(0,r.useSession)(),v=(0,n.useRouter)(),{groups:j,setGroups:N,setCurrentGroup:y,currentGroupId:w}=(0,o.h)(),[z,k]=(0,i.useState)(!0),[C,_]=(0,i.useState)(""),[Z,E]=(0,i.useState)(!1);(0,i.useEffect)(()=>{"unauthenticated"===s?v.push("/"):"authenticated"===s&&S()},[s,v]);let S=async()=>{try{let e=await fetch("/api/groups");if(e.ok){let t=await e.json();N(t)}}catch(e){console.error("Error fetching groups:",e)}finally{k(!1)}},O=async e=>{if(e.preventDefault(),C.trim())try{let e=await fetch("/api/groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:C})});if(e.ok){let t=await e.json();N([...j,t]),E(!1),_(""),m.Am.success("Gruppo creato!"),v.push("/groups/".concat(t.id))}}catch(e){m.Am.error("Errore nella creazione")}},G=e=>{y(e),v.push("/groups/".concat(e))};return z||"loading"===s?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-pulse text-slate-400",children:"Caricamento..."})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-slate-100",children:[(0,a.jsx)("header",{className:"bg-white border-b border-slate-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-600/20",children:(0,a.jsx)(p.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsx)("h1",{className:"text-xl font-bold text-slate-900",children:"Famiglia Budget"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"text-sm text-slate-600",children:null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.name}),(0,a.jsx)(d.z,{variant:"ghost",size:"icon",onClick:()=>(0,r.signOut)({callbackUrl:"/"}),children:(0,a.jsx)(g.Z,{className:"w-4 h-4"})})]})]})}),(0,a.jsxs)("main",{className:"max-w-5xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"I tuoi gruppi"}),(0,a.jsx)("p",{className:"text-slate-500",children:"Seleziona o crea un gruppo per gestire le spese"})]}),(0,a.jsxs)(x.Vq,{open:Z,onOpenChange:E,children:[(0,a.jsx)(x.hg,{asChild:!0,children:(0,a.jsxs)(d.z,{className:"bg-slate-900 hover:bg-slate-800",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Nuovo gruppo"]})}),(0,a.jsxs)(x.cZ,{children:[(0,a.jsx)(x.fK,{children:(0,a.jsx)(x.$N,{children:"Crea nuovo gruppo"})}),(0,a.jsxs)("form",{onSubmit:O,className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u._,{children:"Nome del gruppo"}),(0,a.jsx)(c.I,{placeholder:"Es. Famiglia Rossi",value:C,onChange:e=>_(e.target.value)})]}),(0,a.jsx)(d.z,{type:"submit",className:"w-full",children:"Crea"})]})]})]})]}),0===j.length?(0,a.jsx)(l.Zb,{className:"border-dashed",children:(0,a.jsxs)(l.aY,{className:"py-12 text-center",children:[(0,a.jsx)(h.Z,{className:"w-12 h-12 mx-auto text-slate-300 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"Nessun gruppo"}),(0,a.jsx)("p",{className:"text-slate-500 mb-4",children:"Crea il tuo primo gruppo per iniziare"}),(0,a.jsxs)(d.z,{onClick:()=>E(!0),children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Crea gruppo"]})]})}):(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:j.map(e=>(0,a.jsxs)(l.Zb,{className:"cursor-pointer hover:shadow-lg hover:border-blue-200 transition-all duration-200 group",onClick:()=>G(e.id),children:[(0,a.jsx)(l.Ol,{className:"pb-3",children:(0,a.jsxs)(l.ll,{className:"text-lg flex items-center justify-between",children:[e.name,(0,a.jsx)(b.Z,{className:"w-4 h-4 text-slate-300 group-hover:text-blue-500 transition-colors"})]})}),(0,a.jsx)(l.aY,{children:(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Clicca per entrare nel gruppo"})})]},e.id))})]})]})}},12381:function(e,t,s){"use strict";s.d(t,{z:function(){return l}});var a=s(57437);s(2265);var r=s(90535),n=s(67646),i=s(93448);let o=(0,r.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-xs":"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:s="default",size:r="default",asChild:l=!1,...d}=e,c=l?n.fC:"button";return(0,a.jsx)(c,{"data-slot":"button","data-variant":s,"data-size":r,className:(0,i.cn)(o({variant:s,size:r,className:t})),...d})}},79820:function(e,t,s){"use strict";s.d(t,{Ol:function(){return i},SZ:function(){return l},Zb:function(){return n},aY:function(){return d},ll:function(){return o}});var a=s(57437);s(2265);var r=s(93448);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}},74291:function(e,t,s){"use strict";s.d(t,{$N:function(){return m},Vq:function(){return o},cZ:function(){return u},fK:function(){return x},hg:function(){return l}});var a=s(57437);s(2265);var r=s(32489),n=s(70001),i=s(93448);function o(e){let{...t}=e;return(0,a.jsx)(n.fC,{"data-slot":"dialog",...t})}function l(e){let{...t}=e;return(0,a.jsx)(n.xz,{"data-slot":"dialog-trigger",...t})}function d(e){let{...t}=e;return(0,a.jsx)(n.h_,{"data-slot":"dialog-portal",...t})}function c(e){let{className:t,...s}=e;return(0,a.jsx)(n.aV,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function u(e){let{className:t,children:s,showCloseButton:o=!0,...l}=e;return(0,a.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,a.jsx)(c,{}),(0,a.jsxs)(n.VY,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",t),...l,children:[s,o&&(0,a.jsxs)(n.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function x(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function m(e){let{className:t,...s}=e;return(0,a.jsx)(n.Dx,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",t),...s})}s(12381)},40279:function(e,t,s){"use strict";s.d(t,{I:function(){return n}});var a=s(57437);s(2265);var r=s(93448);function n(e){let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},75060:function(e,t,s){"use strict";s.d(t,{_:function(){return i}});var a=s(57437);s(2265);var r=s(89318),n=s(93448);function i(e){let{className:t,...s}=e;return(0,a.jsx)(r.f,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}},93448:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(61994),r=s(53335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}},59128:function(e,t,s){"use strict";s.d(t,{h:function(){return n}});var a=s(3011),r=s(89134);let n=(0,a.U)()((0,r.tJ)(e=>({currentGroupId:null,groups:[],members:[],categories:[],expenses:[],payments:[],setCurrentGroup:t=>e({currentGroupId:t}),setGroups:t=>e({groups:t}),setMembers:t=>e({members:t}),setCategories:t=>e({categories:t}),setExpenses:t=>e({expenses:t}),setPayments:t=>e({payments:t}),addGroup:t=>e(e=>({groups:[...e.groups,t]})),addMember:t=>e(e=>({members:[...e.members,t]})),updateMember:(t,s)=>e(e=>({members:e.members.map(e=>e.id===t?{...e,...s}:e)})),removeMember:t=>e(e=>({members:e.members.filter(e=>e.id!==t)})),addExpense:t=>e(e=>({expenses:[...e.expenses,t]})),updateExpense:(t,s)=>e(e=>({expenses:e.expenses.map(e=>e.id===t?{...e,...s}:e)})),removeExpense:t=>e(e=>({expenses:e.expenses.filter(e=>e.id!==t)}))}),{name:"famiglia-budget-store"}))}},function(e){e.O(0,[261,795,438,599,955,971,997,744],function(){return e(e.s=89377)}),_N_E=e.O()}]);